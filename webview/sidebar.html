<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="{{styleUri}}" rel="stylesheet">
    <link href="{{codiconUri}}" rel="stylesheet">
    <title>Depure AI</title>
</head>
<body>
    <div class="container">
        <div class="header">
            <i class="codicon codicon-filter-filled"></i>
            <h1>Depure AI</h1>
        </div>
        <p class="tagline">Intelligent Dependency Assistant</p>

        <div class="tab-nav">
            <button class="tab-link active" data-tab="tab-dependencies">
                <i class="codicon codicon-source-control"></i> Dependencies
            </button>
            <button class="tab-link" data-tab="tab-generate" id="generate-tab-btn" disabled>
                <i class="codicon codicon-file-code"></i> Generate
            </button>
            <button class="tab-link" data-tab="tab-settings">
                <i class="codicon codicon-settings-gear"></i> Settings
            </button>
        </div>

        <div class="section status-section">
            <label>Status:</label>
            <div id="status-container">
                <p id="status-message">Ready. Select a source to begin.</p>
                <div id="loader" class="loader hidden"></div>
            </div>
        </div>
        <hr>

        <div id="tab-dependencies" class="tab-content active">
            <div id="source-selection-section">
                <div class="section">
                    <label>Select Project Source:</label>
                    <div class="button-group">
                        <button id="select-folder-btn" class="button"><i class="codicon codicon-folder-opened"></i> Analyze Project Folder</button>
                    </div>
                </div>
            </div>
            <div id="analysis-results-section" class="hidden">
                 <div class="results-header">
                    <h3>Analysis Results</h3>
                    <button id="clear-btn" class="button-icon" title="Start New Scan"><i class="codicon codicon-clear-all"></i></button>
                </div>
                <div id="gemini-analysis-list"></div>
            </div>
        </div>

        <div id="tab-generate" class="tab-content">
            <h3><i class="codicon codicon-zap"></i> Generation Tools</h3>
            <p class="subtle-text">Use the analyzed dependencies to generate project files.</p>
            <div class="generate-buttons">
                <button id="gen-reqs-btn" class="button"><i class="codicon codicon-checklist"></i> requirements.txt</button>
                <button id="gen-dev-reqs-btn" class="button"><i class="codicon codicon-beaker"></i> requirements.dev.txt</button>
                <button id="gen-report-btn" class="button"><i class="codicon codicon-notebook"></i> Project Report (MD)</button>
            </div>
        </div>

        <div id="tab-settings" class="tab-content">
             <h3><i class="codicon codicon-key"></i> API Settings</h3>
             <div class="section">
                <label for="gemini-api-key">Gemini API Key:</label>
                <div class="api-key-group">
                    <input type="password" id="gemini-api-key" placeholder="Enter your Google AI API Key">
                    <button id="save-key-btn" class="button">Save</button>
                </div>
                <p id="api-key-status" class="subtle-text"></p>
            </div>
        </div>

    </div>
    <script src="{{scriptUri}}"></script>
</body>
</html>